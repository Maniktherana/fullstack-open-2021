(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),a=t(6),r=t(3),i=t(1),u=t(0),s=function(e){var n=e.name,t=e.remove;return Object(u.jsx)("div",{children:Object(u.jsxs)("li",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"Delete"})]})})},d=function(e){var n=e.namesToShow,t=e.remove;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)(s,{name:e,remove:t},e.name)}))})]})},l=function(e){var n=e.onSubmit,t=e.newName,c=e.newNumber,o=e.handleNameChange,a=e.handleNumberChange;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Add a new"}),Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:o})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},b=function(e){var n=e.filter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},j=t(4),h=t.n(j),f="/api/persons/",m=function(){return h.a.get(f).then((function(e){return e.data}))},O=function(e){return h.a.post(f,e).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(f).concat(e),n).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(f).concat(e)).then((function(e){return e.data}))},x={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},p={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},w=function(e){var n=e.message;return""===n?null:n.includes("ERROR")?Object(u.jsx)("div",{style:x,className:"error",children:n}):Object(u.jsx)("div",{style:p,className:"error",children:n})},S=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)(""),s=Object(r.a)(o,2),j=s[0],h=s[1],f=Object(i.useState)(""),x=Object(r.a)(f,2),p=x[0],S=x[1],R=Object(i.useState)(!1),y=Object(r.a)(R,2),C=y[0],N=y[1],k=Object(i.useState)(""),E=Object(r.a)(k,2),T=E[0],B=E[1],D=Object(i.useState)(""),z=Object(r.a)(D,2),F=z[0],J=z[1],L=t.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));Object(i.useEffect)((function(){m().then((function(e){c(e)}))}),[]),console.log(t);var A=function(e){var n=!1;t.forEach((function(t){t.name===e&&(n=!0)})),N(n)};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(b,{filter:T,handleFilterChange:function(e){B(e.target.value)}}),Object(u.jsx)(w,{message:F}),Object(u.jsx)(l,{onSubmit:function(e){e.preventDefault(),console.log("button clicked",e.target),console.log(C);var n=t.filter((function(e){return e.name===j}))[0],o=Object(a.a)(Object(a.a)({},n),{},{number:p});C?window.confirm("".concat(j," has already been added.\nWould you like to update ").concat(j,"'s phone number?"))&&g(o.id,o).then((function(e){console.log("Updated ".concat(j," with ").concat(o)),c(t.map((function(t){return t.id!==n.id?t:e}))),h(""),S(""),J("".concat(j," was updated")),setTimeout((function(){J("")}),5e3)})).catch((function(e){console.log(e),h(""),S(""),J("ERROR: ".concat(j," was already deleted")),setTimeout((function(){J("")}),5e3)})):O({name:j,number:p}).then((function(e){c(t.concat(e)),S(""),h(""),J("".concat(j," was added")),setTimeout((function(){J("")}),5e3)})).catch((function(e){J("ERROR: ".concat(e.response.data.error)),setTimeout((function(){J("")}),5e3),console.log(e.response.data)}))},newName:j,newNumber:p,handleNameChange:function(e){h(e.target.value),A(e.target.value)},handleNumberChange:function(e){S(e.target.value)}}),Object(u.jsx)(d,{namesToShow:L,remove:function(e,n){window.confirm("Delete ".concat(n,"?"))&&v(e).then((function(n){c(t.filter((function(n){return n.id!==e}))),console.log("deleted ".concat(n))})).catch((function(e){J("ERROR: ".concat(n," was already deleted")),setTimeout((function(){J("")}),5e3),console.log(e)}))}})]})};t(39);o.a.render(Object(u.jsx)(S,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.cdf9faa0.chunk.js.map